<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36 Edg/144.0.0.0" version="29.3.4">
  <diagram name="Trang-1" id="lLbOsObqpdQvHm_yIitp">
    <mxGraphModel grid="1" page="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-34" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;" value="" vertex="1">
          <mxGeometry height="660" width="881" x="3380" y="-2070" as="geometry" />
        </mxCell>
        <mxCell id="FmvQzQtMx8JE6bOPIwH3-1" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Create Root(node and fiber)&lt;/h1&gt;&lt;p&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;Node.current = fiber; Fiber.stateNode = node&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;&lt;div style=&quot;color: rgb(59, 59, 59); background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;&quot;&gt;&lt;div&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;initialCache&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;{&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;controller&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color: #267f99;&quot;&gt;AbortControllerLocal&lt;/span&gt;(),&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;data&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color: #267f99;&quot;&gt;Map&lt;/span&gt;(),&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;refCount&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #098658;&quot;&gt;0&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; };&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;initialState&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;RootState&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;element&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;initialChildren&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;isDehydrated&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;hydrate&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;cache&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;initialCache&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; };&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;uninitializedFiber&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;memoizedState&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;initialState&lt;/span&gt;;&lt;/div&gt;  &lt;br&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// initializeUpdateQueue&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;uninitializedFiber&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;updateQueue&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt; {&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;baseState&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #001080;&quot;&gt;fiber&lt;/span&gt;.&lt;span style=&quot;color: #001080;&quot;&gt;memoizedState&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;firstBaseUpdate&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;null&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;lastBaseUpdate&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;null&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;shared&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;pending&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;null&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;lanes&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #0070c1;&quot;&gt;NoLanes&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;hiddenCallbacks&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;null&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; },&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;callbacks&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;null&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; };&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="570" width="390" x="-790" y="-580" as="geometry" />
        </mxCell>
        <mxCell id="FmvQzQtMx8JE6bOPIwH3-2" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;rounded=0;" value="&lt;div style=&quot;color: rgb(59, 59, 59); background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Node&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; {&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;tag&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;TagType&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;containerInfo&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// DOM container&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingChildren&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Fiber&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;null&lt;/span&gt;; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// to store fiber&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pingCache&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;timeoutHandle&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;cancelPendingCommit&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;context&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingContext&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;callbackNode&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// properties involve timing for update&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;callbackPriority&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Lane&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;expirationTimes&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;number&lt;/span&gt;[]; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// timestamps for all lanes with 31 lanes&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingLanes&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Lane&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;suspendedLanes&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Lane&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pingedLanes&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Lane&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;warmLanes&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Lane&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;expiredLanes&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Lane&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;errorRecoveryDisabledLanes&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Lane&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;shellSuspendCounter&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;entangledLanes&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Lane&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;entanglements&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Lane&lt;/span&gt;[];&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;hiddenUpdates&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Lane&lt;/span&gt;[][];&lt;/font&gt;&lt;/div&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;identifierPrefix&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// error handlers&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;onUncaughtError&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;onCaughtError&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;onRecoverableError&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pooledCache&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pooledCacheLanes&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Lane&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;formState&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;ReactFormState&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;, &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;string&lt;/span&gt;&amp;gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;}&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="740" width="570" x="-1480" y="-970" as="geometry" />
        </mxCell>
        <mxCell id="FmvQzQtMx8JE6bOPIwH3-3" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="Text" vertex="1">
          <mxGeometry height="30" width="60" x="-920" y="680" as="geometry" />
        </mxCell>
        <mxCell id="FmvQzQtMx8JE6bOPIwH3-4" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;rounded=0;fontSize=16;" value="&lt;div style=&quot;color: rgb(59, 59, 59); background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;type&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Fiber&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; {&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;tag&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;TagType&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;key&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;string&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;elementType&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;type&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;stateNode&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;FiberNode&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;null&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// fiber relations&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;child&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;sibling&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;index&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;ref&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;refCleanup&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// data for update node/component&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingProps&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;memoizedProps&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;updateQueue&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;UpdateQueue&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;&amp;gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;memoizedState&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;RootState&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;null&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;dependencies&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;mode&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;flags&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;subtreeFlags&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;deletions&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// scheduling&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lanes&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Lane&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;childLanes&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;alternate&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font&gt;};&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="610" width="300" x="-1260" y="-100" as="geometry" />
        </mxCell>
        <mxCell id="FmvQzQtMx8JE6bOPIwH3-5" edge="1" parent="1" source="FmvQzQtMx8JE6bOPIwH3-4" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" target="FmvQzQtMx8JE6bOPIwH3-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FmvQzQtMx8JE6bOPIwH3-10" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;" value="" vertex="1">
          <mxGeometry height="1840" width="1320" x="-1600" y="-1100" as="geometry" />
        </mxCell>
        <mxCell id="FmvQzQtMx8JE6bOPIwH3-11" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;h1&gt;&lt;font style=&quot;font-size: 48px;&quot;&gt;Create Root&lt;/font&gt;&lt;/h1&gt;" vertex="1">
          <mxGeometry height="30" width="389" x="-770" y="-930" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-26" edge="1" parent="1" source="FmvQzQtMx8JE6bOPIwH3-12" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=12;startSize=8;endSize=8;" target="bbmsZlRke5MW_gYbGA1g-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FmvQzQtMx8JE6bOPIwH3-12" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;" value="" vertex="1">
          <mxGeometry height="2230" width="2020" x="-100" y="-1110" as="geometry" />
        </mxCell>
        <mxCell id="FmvQzQtMx8JE6bOPIwH3-14" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;h1&gt;&lt;span style=&quot;font-size: 48px;&quot;&gt;Prepare for Renderring&lt;/span&gt;&lt;/h1&gt;" vertex="1">
          <mxGeometry height="30" width="400" x="1080" y="-1020" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-1" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Preparation(updateContainer)&lt;/h1&gt;&lt;p&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;init lane = default Lane =&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(9, 134, 88); background-color: rgb(255, 255, 255); font-family: &amp;quot;Fira Code&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; white-space: pre;&quot;&gt;0b0000000000000000000000000100000&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;mode = ???&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;padding-top: 0px;&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;current = root fiber&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;element = App&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;container = root node&lt;/span&gt;&lt;/p&gt;" vertex="1">
          <mxGeometry height="250" width="370" x="-30" y="-1080" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-5" edge="1" parent="1" source="bbmsZlRke5MW_gYbGA1g-2" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=12;startSize=8;endSize=8;" target="bbmsZlRke5MW_gYbGA1g-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-2" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Init Update&lt;/h1&gt;&lt;div style=&quot;color: rgb(59, 59, 59); background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;update&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Update&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;mixed&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; {&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lane&lt;/span&gt;,&lt;/font&gt;&lt;/div&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;tag&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;UpdateState&lt;/span&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;payload&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;{&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;App&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;}&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;,&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;callback&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;,&lt;/font&gt;&lt;/div&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; };&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="280" width="310" x="-30" y="-780" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-3" edge="1" parent="1" source="bbmsZlRke5MW_gYbGA1g-1" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" target="bbmsZlRke5MW_gYbGA1g-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-8" edge="1" parent="1" source="bbmsZlRke5MW_gYbGA1g-4" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" target="bbmsZlRke5MW_gYbGA1g-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-4" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Enqueue Update&lt;/h1&gt;&lt;div style=&quot;color: rgb(59, 59, 59); background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;sharedQueue&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;fiber&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;updateQueue&lt;/span&gt;?.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;shared&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;// push all data into update_queue(concurrentQueues)&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;concurrentQueues&lt;/span&gt;[&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;concurrentQueuesIndex&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;++&lt;/span&gt;] &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;fiber&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;concurrentQueues&lt;/span&gt;[&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;concurrentQueuesIndex&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;++&lt;/span&gt;] &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;font-size: 16px; color: rgb(0, 112, 193);&quot;&gt;sharedQueue&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;concurrentQueues&lt;/span&gt;[&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;concurrentQueuesIndex&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;++&lt;/span&gt;] &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;update&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;  // default lane&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;concurrentQueues&lt;/span&gt;[&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;concurrentQueuesIndex&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;++&lt;/span&gt;] &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lane&lt;/span&gt;;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="280" width="470" x="-20" y="-380" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-6" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;fillColor=default;strokeColor=default;perimeterSpacing=0;absoluteArcSize=0;arcSize=12;noLabel=0;labelPadding=1;spacingLeft=12;spacingBottom=12;spacing=2;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Notes&lt;/h1&gt;&lt;p&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Updates are kept in a continuous queue and&amp;nbsp;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;each instant store component func&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" vertex="1">
          <mxGeometry height="140" width="250" x="310" y="-550" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-12" edge="1" parent="1" source="bbmsZlRke5MW_gYbGA1g-7" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1.011;exitY=0.204;exitDx=0;exitDy=0;fontSize=12;startSize=8;endSize=8;exitPerimeter=0;" target="bbmsZlRke5MW_gYbGA1g-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-7" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Schedule update fiber root&lt;/h1&gt;&lt;div style=&quot;color: rgb(59, 59, 59); background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// mark root has update&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;updateLane&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;DefaultLane&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;rootNode&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;updateLane&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;updateLane&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!==&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;IdleLane&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;rootNode&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;suspendedLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NoLanes&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;rootNode&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pingedLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NoLanes&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;rootNode&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;warmLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NoLanes&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; }&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;ensureRootIsScheduled&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// Add the root to the schedule_root_queue&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt; // &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;(lastScheduledRoot = null)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;===&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lastScheduledRoot&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;||&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!==&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// Fast path. This root is already scheduled.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; } &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;else&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lastScheduledRoot&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;===&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;firstScheduledRoot&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lastScheduledRoot&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; } &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;else&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lastScheduledRoot&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lastScheduledRoot&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; }&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;ensureScheduleIsScheduled&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// push a schedule task into &lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// schedule callback module with priority = Immediate(1)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// need to invest more in Scheduler.scheduleCallback&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;scheduleImmediateRootScheduleTask&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;processRootScheduleInImmediateTask&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;processRootScheduleInMicrotask&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="710" width="470" x="-20" y="-30" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-9" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;fillColor=default;strokeColor=default;perimeterSpacing=0;absoluteArcSize=0;arcSize=12;noLabel=0;labelPadding=1;spacingLeft=12;spacingBottom=12;spacing=2;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Notes&lt;/h1&gt;&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;Schedule callback contains 2 queues:&lt;br&gt;+ task: to handle push(sift up task has high prior) and pop task()&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;+ timer: store delayed tasks with specific timeout,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 14px; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;tasks are moved to task queue after they finishes their waiting time.&lt;/span&gt;&lt;/p&gt;" vertex="1">
          <mxGeometry height="220" width="320" x="-20" y="700" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-15" edge="1" parent="1" source="bbmsZlRke5MW_gYbGA1g-10" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" target="bbmsZlRke5MW_gYbGA1g-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-10" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&amp;nbsp; Process schedule_root_queue&lt;/h1&gt;&lt;div style=&quot;color: rgb(59, 59, 59); background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;&amp;nbsp; let &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;prev&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; null;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;  let&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;firstScheduledRoot&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;while&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!==&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;next&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;nextLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;scheduleTaskForRootDuringMicrotask&lt;/span&gt;(&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;root&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;currentTime&lt;/span&gt;&lt;/div&gt;&lt;div&gt;    );&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;  &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt; (&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 112, 193);&quot;&gt;nextLanes&lt;/span&gt;&lt;span style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 0, 0);&quot;&gt;===&lt;/span&gt;&lt;span style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 112, 193);&quot;&gt;NoLane&lt;/span&gt;&lt;span style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;) {&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// This root has no more pending work.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;prev&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;===&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// This is the new head of the list&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;firstScheduledRoot&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;next&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; } &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;else&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;prev&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;next&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;next&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;===&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// This is the new tail of the list&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lastScheduledRoot&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;prev&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; } &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;else&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// This root still has work. Keep it in the list.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;prev&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;/div&gt;&lt;div&gt;    &lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 112, 193);&quot;&gt;next&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&amp;nbsp; }&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="600" width="470" x="640" y="-840" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-13" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;div style=&quot;color: rgb(59, 59, 59); background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;&quot;&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;markStarvedLanesAsExpired&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;&quot;&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;(need to know bit manipulation)&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="30" width="100" x="830" y="-100" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-14" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&amp;nbsp; Schedule a work task&lt;/h1&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: rgb(121, 94, 38); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;scheduleTaskForRootDuringMicrotask&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;    // schedule performWorkOnRoot to schedule &lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;    // callback module&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;    const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newCallbackNode&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;scheduleCallback&lt;/span&gt;(&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;schedulerPriorityLevel&lt;/span&gt;,&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;performWorkOnRootViaSchedulerTask&lt;/span&gt;.&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;bind&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;),&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &amp;nbsp; );&lt;/div&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;callbackPriority&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newCallbackPriority&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;callbackNode&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newCallbackNode&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;    &lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;    &lt;span style=&quot;color: rgb(121, 94, 38); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;performWorkOnRootViaSchedulerTask&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;    &lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(121, 94, 38);&quot;&gt;performWorkOnRoot&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(121, 94, 38);&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: rgb(121, 94, 38); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;renderRootConcurrent&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: rgb(121, 94, 38); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;prepareFreshStack&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(121, 94, 38);&quot;&gt;resetWorkInProgressStack&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;();&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressRoot&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;rootWorkInProgress&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;createWorkInProgress&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;rootWorkInProgress&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressRootRenderLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lanes&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressSuspendedReason&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NotSuspended&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressThrownValue&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressRootDidSkipSuspendedSiblings&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;false&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressRootIsPrerendering&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;checkIfRootIsPrerendering&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lanes&lt;/span&gt;);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressRootDidAttachPingListener&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;false&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressRootExitStatus&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;RootInProgress&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressRootSkippedLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NoLanes&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressRootInterleavedUpdatedLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NoLanes&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressRootRenderPhaseUpdatedLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NoLanes&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressRootPingedLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NoLanes&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressDeferredLane&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NoLane&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressSuspendedRetryLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NoLanes&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressRootConcurrentErrors&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressRootRecoverableErrors&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressRootDidIncludeRecursiveRenderUpdate&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;false&lt;/span&gt;;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#795e26&quot;&gt;  &lt;/font&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(121, 94, 38);&quot;&gt;finishQueueingConcurrentUpdates&lt;/span&gt;&lt;span style=&quot;color: rgb(59, 59, 59); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="790" width="600" x="610" y="-20" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-16" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;fillColor=default;strokeColor=default;perimeterSpacing=0;absoluteArcSize=0;arcSize=12;noLabel=0;labelPadding=1;spacingLeft=12;spacingBottom=12;spacing=2;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Notes&lt;/h1&gt;&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;Now schedule callback have 2 task:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(121, 94, 38); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; white-space: pre; background-color: rgb(255, 255, 255);&quot;&gt;processRootScheduleInMicrotask &lt;/span&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;task&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(121, 94, 38); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; white-space: pre;&quot;&gt;performWorkOnRootViaSchedulerTask task&lt;/span&gt;&lt;/p&gt;" vertex="1">
          <mxGeometry height="220" width="320" x="610" y="820" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-22" edge="1" parent="1" source="bbmsZlRke5MW_gYbGA1g-18" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.471;entryY=-0.004;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;entryPerimeter=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" target="bbmsZlRke5MW_gYbGA1g-21">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1521" y="10" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-18" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&amp;nbsp; Create a clone from root&lt;/h1&gt;&lt;div style=&quot;color: rgb(59, 59, 59); background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;createWorkInProgress&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;  let&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;alternate&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;===&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;createFiber&lt;/span&gt;(&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;tag&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingProps&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;key&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;mode&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; );&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;elementType&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;elementType&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;type&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;type&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;stateNode&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;stateNode&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;    &lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;    &lt;b&gt;// link clone to root here&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;    &lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;alternate&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;alternate&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&amp;nbsp; } &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;else&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingProps&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingProps&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;type&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;type&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;flags&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NoFlags&lt;/span&gt;;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;subtreeFlags&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 112, 193);&quot;&gt;NoFlags&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;deletions&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; }&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// Reset all effects except static ones.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// Static effects are not specific to a render.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;flags&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;flags&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;StaticMask&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;childLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;childLanes&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lanes&lt;/span&gt;;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;child&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;child&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;memoizedProps&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;memoizedProps&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;memoizedState&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;memoizedState&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;updateQueue&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;updateQueue&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  &lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// These will be overridden during the parent&#39;s reconciliation&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;sibling&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;sibling&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;index&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;index&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;ref&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;ref&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;refCleanup&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;refCleanup&lt;/span&gt;;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="840" width="470" x="1290" y="-840" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-20" edge="1" parent="1" source="bbmsZlRke5MW_gYbGA1g-14" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" target="bbmsZlRke5MW_gYbGA1g-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-21" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&amp;nbsp; Pop out Update&lt;/h1&gt;&lt;div style=&quot;color: rgb(59, 59, 59); background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// pop out updates and chains these to a link list&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;  // this link list is attached beforehand to current fiber&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(121, 94, 38); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;  finishQueueingConcurrentUpdates&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;endIndex&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;concurrentQueuesIndex&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;concurrentQueuesIndex&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(9, 134, 88);&quot;&gt;0&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;concurrentlyUpdatedLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NoLanes&lt;/span&gt;;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;let&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(9, 134, 88);&quot;&gt;0&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;while&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;endIndex&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;fiber&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Fiber&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;concurrentQueues&lt;/span&gt;[&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;i&lt;/span&gt;];&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;concurrentQueues&lt;/span&gt;[&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;++&lt;/span&gt;] &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;queue&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;ConcurrentQueue&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;concurrentQueues&lt;/span&gt;[&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;i&lt;/span&gt;];&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;concurrentQueues&lt;/span&gt;[&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;++&lt;/span&gt;] &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;update&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;ConcurrentUpdate&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;concurrentQueues&lt;/span&gt;[&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;i&lt;/span&gt;];&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;concurrentQueues&lt;/span&gt;[&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;++&lt;/span&gt;] &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;lane&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Lane&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;concurrentQueues&lt;/span&gt;[&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;i&lt;/span&gt;];&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;concurrentQueues&lt;/span&gt;[&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;++&lt;/span&gt;] &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;queue&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!==&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;update&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!==&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;      &lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// make the update is always the tail of &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;      // queue.pending circular link list &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;      // &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;queue.pending is head&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;pending&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;queue&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pending&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;pending&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;===&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 112, 193);&quot;&gt;update&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 112, 193);&quot;&gt;update&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; } &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;else&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;update&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;pending&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;pending&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;update&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;queue&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pending&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;update&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;lane&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!==&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NoLane&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;markUpdateLaneFromFiberToRoot&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;fiber&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;update&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;lane&lt;/span&gt;);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; }&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="750" width="470" x="1300" y="140" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-23" edge="1" parent="1" source="FmvQzQtMx8JE6bOPIwH3-10" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.401;entryDx=0;entryDy=0;entryPerimeter=0;fontSize=12;startSize=8;endSize=8;" target="FmvQzQtMx8JE6bOPIwH3-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-24" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;" value="" vertex="1">
          <mxGeometry height="1710" width="1832" x="2110" y="-860" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-25" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;h1&gt;&lt;span style=&quot;font-size: 48px;&quot;&gt;Work L&lt;/span&gt;&lt;span style=&quot;font-size: 48px; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;oop &amp;amp; Reconciliation&lt;/span&gt;&lt;/h1&gt;" vertex="1">
          <mxGeometry height="30" width="400" x="3022" y="-590" as="geometry" />
        </mxCell>
        <mxCell id="Ul5_clGtm1_nR-zLQSHC-2" edge="1" parent="1" source="bbmsZlRke5MW_gYbGA1g-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" target="Ul5_clGtm1_nR-zLQSHC-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bbmsZlRke5MW_gYbGA1g-27" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&amp;nbsp; Work Loop&lt;/h1&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;function&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;workLoopConcurrentByScheduler&lt;/span&gt;() {&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// Perform work until Scheduler asks us to yield&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;while&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!==&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!&lt;/span&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;shouldYield&lt;/span&gt;()) {&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(121, 94, 38);&quot;&gt;performUnitOfWork&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; }&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;}&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;==========================================================&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;performUnitOfWork&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;unitOfWork&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// clone fiber&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 112, 193);&quot;&gt;current&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;unitOfWork&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;alternate&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 128, 0);&quot;&gt;// main fiber&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt; &lt;/span&gt;beginWork&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(121, 94, 38);&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;unitOfWork&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;memoizedProps&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;unitOfWork&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;pendingProps&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;===&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(121, 94, 38);&quot;&gt;completeUnitOfWork&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;unitOfWork&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;} &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;else&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="430" width="470" x="2182" y="-830" as="geometry" />
        </mxCell>
        <mxCell id="Ul5_clGtm1_nR-zLQSHC-4" edge="1" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="Ul5_clGtm1_nR-zLQSHC-3">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2650" y="240" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Ul5_clGtm1_nR-zLQSHC-1" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Peform work: Preparation&lt;/h1&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(121, 94, 38), rgb(176, 153, 105));&quot;&gt;beginWork&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(121, 94, 38), rgb(176, 153, 105));&quot;&gt;{&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(121, 94, 38);&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;renderWithHooks&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;{&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// hooks are &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;relied on &#39;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;currentlyRenderingFiber&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(0, 128, 0), rgb(80, 190, 80));&quot;&gt;&#39; to &lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: light-dark(rgb(0, 128, 0), rgb(80, 190, 80));&quot;&gt;// initialize&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;currentlyRenderingFiber&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;memoizedState&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;updateQueue&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NoLanes&lt;/span&gt;;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// all hooks are kept here&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;ReactSharedInternals&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;H&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;===&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;||&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;memoizedState&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;===&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;?&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;HooksDispatcherOnMount&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;HooksDispatcherOnUpdate&lt;/span&gt;; &lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// mount component, its hooks and return &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// content(A React Element)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;let&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;children&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;Component&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;props&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;secondArg&lt;/span&gt;); &lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// here all hooks will invoke &lt;/span&gt;&lt;span style=&quot;color: rgb(121, 94, 38); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;mountWorkInProgressHook()&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// to attach hooks link list into current fiber&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// each hook is mounted according to its purpose&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;hook&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Hook&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; {&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;memoizedState&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;,&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;baseState&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&lt;font&gt;  &lt;/font&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;baseQueue&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;:&lt;/span&gt;&lt;font&gt; &lt;/font&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;&lt;font&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;queue&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;,&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;,&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;};&lt;/div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressHook&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;===&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;) {&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// This is the first hook in the list&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;currentlyRenderingFiber&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;memoizedState&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;workInProgressHook&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;hook&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;} &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;else&lt;/span&gt; {&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// Append to the end of the list&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressHook&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressHook&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;hook&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;}&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// dispose resorurces: &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;currentlyRenderingFiber, &lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;//&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt; workInProgressHook,...&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// and recheck context changes&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;finishRenderingHooks&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;reconcileChildren&lt;/span&gt;&lt;span style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;&lt;span style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;&lt;span style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;, &lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;            nextChildren&lt;/span&gt;&lt;span style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;renderLanes&lt;/span&gt;&lt;span style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;child&lt;/span&gt;; &lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// created fiber by &lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// reconcileChilren&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="1020" width="470" x="2182" y="-300" as="geometry" />
        </mxCell>
        <mxCell id="tSYvDpO3np7NIJwQXaLi-2" edge="1" parent="1" source="Ul5_clGtm1_nR-zLQSHC-3" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=12;startSize=8;endSize=8;entryX=0.005;entryY=0.56;entryDx=0;entryDy=0;entryPerimeter=0;" target="tSYvDpO3np7NIJwQXaLi-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Ul5_clGtm1_nR-zLQSHC-3" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Peform work: Reconciliation&lt;/h1&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(121, 94, 38);&quot;&gt;&lt;div style=&quot;line-height: 19px; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;line-height: 19px; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// During this work, miscellanenous react children type&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// will be process: array, single react ele, fragment,&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// iterator, context, portal, async function(thenable &lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// or ssr &lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;color: light-dark(rgb(0, 128, 0), rgb(80, 190, 80)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;component)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// all operations will return fibers(with fiber.return = &lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// parent fiber&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;color: light-dark(rgb(0, 128, 0), rgb(80, 190, 80)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;) and delete empty &lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// chilren (not show on dom tree but be kept in&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// fiber.deletions)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;reconcileChildren&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;font color=&quot;#795e26&quot;&gt;{&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;child&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;mountChildFibers&lt;/span&gt;(&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;nextChildren&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// React Element, string, array,...&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;renderLanes&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; );&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;font color=&quot;#795e26&quot;&gt;mountChildFibers&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;font color=&quot;#795e26&quot;&gt;createChildReconciler&lt;/font&gt;&lt;span style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 0, 255);&quot;&gt;false&lt;/span&gt;&lt;span style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;reconcileChildFibers&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// children can be object(React Element, array, context,&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// ...) or primitive types: string, boolean, number&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// so they will be processed in different way&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// for array, children is a link list with sibling &lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// as the linking property&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59);&quot;&gt;&lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;previousNewFiber&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;===&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;) {&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;    &lt;/font&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;resultingFirstChild&lt;/span&gt;&lt;font color=&quot;#3b3b3b&quot;&gt; &lt;/font&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt;&lt;font color=&quot;#3b3b3b&quot;&gt; &lt;/font&gt;&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newFiber&lt;/span&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59);&quot;&gt;  } &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;else&lt;/span&gt; {&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;previousNewFiber&lt;/span&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;.&lt;/font&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;sibling&lt;/span&gt;&lt;font color=&quot;#3b3b3b&quot;&gt; &lt;/font&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt;&lt;font color=&quot;#3b3b3b&quot;&gt; &lt;/font&gt;&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newFiber&lt;/span&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59);&quot;&gt;}&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px; color: rgb(59, 59, 59);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&lt;span style=&quot;color: rgb(0, 16, 128); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;previousNewFiber&lt;/span&gt;&lt;span style=&quot;color: rgb(59, 59, 59); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: rgb(59, 59, 59); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 112, 193); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;newFiber&lt;/span&gt;&lt;span style=&quot;color: rgb(59, 59, 59); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;;&lt;/span&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt; &lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// &lt;b&gt;HOW CAN THEY PROCESS ASYNC COMPONENT??&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&lt;b&gt;// WHAT IS ALL ABOUT THE CONTEXT&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;==== end beginWork =======&lt;/span&gt;&lt;b&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="780" width="470" x="2750" y="-150" as="geometry" />
        </mxCell>
        <mxCell id="Ul5_clGtm1_nR-zLQSHC-5" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;b style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 72px;&quot;&gt;React version: 19.2.1&amp;nbsp;&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 72px;&quot;&gt;Commit ID:&amp;nbsp;&lt;/font&gt;&lt;/b&gt;&lt;span style=&quot;background-color: transparent; font-size: 72px;&quot;&gt;&lt;b&gt;65eec428c40d542d4d5a9c1af5c3f406aecf3440&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 72px;&quot;&gt;Render Process&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="30" width="3334" x="-132" y="-1765" as="geometry" />
        </mxCell>
        <mxCell id="tSYvDpO3np7NIJwQXaLi-1" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Complete unit of work&lt;/h1&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(121, 94, 38);&quot;&gt;&lt;div style=&quot;line-height: 19px; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;line-height: 19px; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// this process simply loop through all child or sibling&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// fibers and popout completed resources&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;completeUnitOfWork&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// All dom nodes are attached to react child node here, where&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// the html jsx dom are created with tag = HostComponent&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// these HostComponent will be processed to &lt;b&gt;add the dom into&lt;/b&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&lt;b&gt;// fiber.stateNode &lt;/b&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;completeWork&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;switch&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;tag&lt;/span&gt;) {&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;  &lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(175, 0, 219);&quot;&gt;case&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 112, 193);&quot;&gt;HostComponent&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;: {&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// Not update or hydrate then mount a new DOM instance&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;instance&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;createInstance&lt;/span&gt;(&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;type&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newProps&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;rootContainerInstance&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;currentHostContext&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; );&lt;/div&gt;&lt;div&gt;    &lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;stateNode&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 112, 193);&quot;&gt;instance&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;  }&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;}&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// Then go out of stack&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;performUnitOfWork&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;workLoopConcurrentByScheduler&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;finishQueueingConcurrentUpdates&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 19px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); font-size: 14px; font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; white-space: pre; font-weight: normal; line-height: 14px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// We now have a consistent tree. The next step is either&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// to commit it, &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;or, if something suspended, wait to commit &lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// it after a timeout.&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59);&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;finishConcurrentRender&lt;/span&gt;(&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59);&quot;&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;  root&lt;/span&gt;,&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(121, 94, 38), rgb(176, 153, 105));&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;exitStatus&lt;/span&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(121, 94, 38), rgb(176, 153, 105));&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;finishedWork&lt;/span&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(121, 94, 38), rgb(176, 153, 105));&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lanes&lt;/span&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(121, 94, 38), rgb(176, 153, 105));&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;renderEndTime&lt;/span&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59);&quot;&gt;);&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// Commit root means root is ready for rendering on DOM tree&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;commitRootWhenReady&lt;/span&gt;(&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;finishedWork&lt;/span&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressRootRecoverableErrors&lt;/span&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressTransitions&lt;/span&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressRootDidIncludeRecursiveRenderUpdate&lt;/span&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lanes&lt;/span&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressDeferredLane&lt;/span&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressRootInterleavedUpdatedLanes&lt;/span&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressSuspendedRetryLanes&lt;/span&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgressRootDidSkipSuspendedSiblings&lt;/span&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;exitStatus&lt;/span&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;renderStartTime&lt;/span&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;renderEndTime&lt;/span&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;);&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="1180" width="490" x="3380" y="-420" as="geometry" />
        </mxCell>
        <mxCell id="tSYvDpO3np7NIJwQXaLi-8" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;" value="" vertex="1">
          <mxGeometry height="1630" width="1400" x="4220" y="-900" as="geometry" />
        </mxCell>
        <mxCell id="tSYvDpO3np7NIJwQXaLi-9" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;h1&gt;&lt;span style=&quot;font-size: 48px;&quot;&gt;Insert to HTML Root DOM&lt;/span&gt;&lt;/h1&gt;" vertex="1">
          <mxGeometry height="30" width="400" x="5020" y="-780" as="geometry" />
        </mxCell>
        <mxCell id="tSYvDpO3np7NIJwQXaLi-10" edge="1" parent="1" source="tSYvDpO3np7NIJwQXaLi-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" target="tSYvDpO3np7NIJwQXaLi-17">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="4527" y="-340" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tSYvDpO3np7NIJwQXaLi-11" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Begin commit root&lt;/h1&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); line-height: 19px; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; white-space: pre;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;commitRoot&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// check for unpredictable errors first&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// then store work info in pending state &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingFinishedWork&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;finishedWork&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingEffectsRoot&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingEffectsLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lanes&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingEffectsRemainingLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;remainingLanes&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingPassiveTransitions&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;transitions&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingRecoverableErrors&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;recoverableErrors&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingDidIncludeRenderPhaseUpdate&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;didIncludeRenderPhaseUpdate&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #008000;&quot;&gt;// The first phase a &quot;before mutation&quot; phase. We use this &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #008000;&quot;&gt;// phase to read the &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;state of the host tree right before &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// we mutate it. This is where &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;getSnapshotBeforeUpdate is &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// called.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;commitBeforeMutationEffects&lt;/span&gt;(&lt;span style=&quot;color: #001080;&quot;&gt;root&lt;/span&gt;, &lt;span style=&quot;color: #001080;&quot;&gt;finishedWork&lt;/span&gt;, &lt;span style=&quot;color: #001080;&quot;&gt;lanes&lt;/span&gt;);&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="390" width="470" x="4292" y="-870" as="geometry" />
        </mxCell>
        <mxCell id="tSYvDpO3np7NIJwQXaLi-19" edge="1" parent="1" source="tSYvDpO3np7NIJwQXaLi-17" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=12;startSize=8;endSize=8;" target="tSYvDpO3np7NIJwQXaLi-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tSYvDpO3np7NIJwQXaLi-17" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Prepare instrumental utils&lt;/h1&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); line-height: 19px; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; white-space: pre;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;commitRoot&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// check for unpredictable errors first&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// then store work info in pending state &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingFinishedWork&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;finishedWork&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingEffectsRoot&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingEffectsLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lanes&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingEffectsRemainingLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;remainingLanes&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingPassiveTransitions&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;transitions&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingRecoverableErrors&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;recoverableErrors&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingDidIncludeRenderPhaseUpdate&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;didIncludeRenderPhaseUpdate&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// The first phase a &quot;before mutation&quot; phase. We use this &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// phase to read the &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;state of the host tree right before &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// we mutate it. This is where &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;getSnapshotBeforeUpdate is &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// called.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;commitBeforeMutationEffects&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;finishedWork&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lanes&lt;/span&gt;);&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="390" width="470" x="4292" y="-400" as="geometry" />
        </mxCell>
        <mxCell id="tSYvDpO3np7NIJwQXaLi-21" edge="1" parent="1" source="tSYvDpO3np7NIJwQXaLi-18" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" target="tSYvDpO3np7NIJwQXaLi-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tSYvDpO3np7NIJwQXaLi-18" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Process effects before render&lt;/h1&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); line-height: 19px; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; white-space: pre;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;commitRoot&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// check for unpredictable errors first&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// then store work info in pending state &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingFinishedWork&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;finishedWork&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingEffectsRoot&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingEffectsLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lanes&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingEffectsRemainingLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;remainingLanes&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingPassiveTransitions&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;transitions&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingRecoverableErrors&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;recoverableErrors&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingDidIncludeRenderPhaseUpdate&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;didIncludeRenderPhaseUpdate&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// The first phase a &quot;before mutation&quot; phase. We use this &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// phase to read the &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;state of the host tree right before &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// we mutate it. This is where &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;getSnapshotBeforeUpdate is &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// called.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;commitBeforeMutationEffects&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;finishedWork&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lanes&lt;/span&gt;);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;flushMutationEffects&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #008000;&quot;&gt;// The next phase is the mutation phase, where we mutate &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #008000;&quot;&gt;// the host tree: render tree&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;commitMutationEffects&lt;/span&gt;(&lt;span style=&quot;color: #0070c1;&quot;&gt;root&lt;/span&gt;, &lt;span style=&quot;color: #0070c1;&quot;&gt;finishedWork&lt;/span&gt;, &lt;span style=&quot;color: #0070c1;&quot;&gt;lanes&lt;/span&gt;);&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="490" width="470" x="4292" y="90" as="geometry" />
        </mxCell>
        <mxCell id="tSYvDpO3np7NIJwQXaLi-20" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Insert to DOM&lt;/h1&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); line-height: 19px; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; white-space: pre;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// Call stack&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;commitMutationEffectsOnFiber&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// this function support reconcialiation for various &lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// compoennt types: ClassComponent, MemoComponent, &lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// HostPortal, ... and then run &lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;commitReconciliationEffects&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// this is the place when the tree elements are&lt;b&gt; inserted&lt;/b&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&lt;b&gt;// in parent to child basis and so on til root node&lt;/b&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;commitPlacement&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;parent&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Instance&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;hostParentFiber&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;stateNode&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;before&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;getHostSibling&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;finishedWork&lt;/span&gt;);&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// We only have the top Fiber that was inserted but we &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// need to recurse down its &lt;/span&gt;&lt;span style=&quot;color: light-dark(rgb(0, 128, 0), rgb(80, 190, 80)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;children to find all the &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: light-dark(rgb(0, 128, 0), rgb(80, 190, 80)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// terminal nodes.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;insertOrAppendPlacementNode&lt;/span&gt;(&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;finishedWork&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;before&lt;/span&gt;, // dom node&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;parent&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// The parent instance to insert into: dom node&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;parentFragmentInstances&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// host root will be insert&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;isHost&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;  const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;stateNode&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;node&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;stateNode&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;  if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;before&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp;   &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;insertBefore&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;parent&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;stateNode&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;before&lt;/span&gt;);&lt;/div&gt;&lt;div&gt;  } &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;else&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp;   &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;appendChild&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;parent&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;stateNode&lt;/span&gt;);&lt;/div&gt;&lt;div&gt;  }&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;  if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;enableFragmentRefs&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp;   &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;commitNewChildToFragmentInstances&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;node&lt;/span&gt;, &lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;    parentFragmentInstances&lt;/span&gt;);&lt;/div&gt;&lt;div&gt;  }&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;  trackHostMutation&lt;/span&gt;();&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;  return&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// chilren will be processed again by recursion&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;child&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;node&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;child&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;child&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!==&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;insertOrAppendPlacementNode&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;child&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;before&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;parent&lt;/span&gt;, &lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;parentFragmentInstances&lt;/span&gt;);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;let&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;sibling&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;child&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;sibling&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;while&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;sibling&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!==&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;insertOrAppendPlacementNode&lt;/span&gt;(&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;sibling&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;before&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;parent&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;parentFragmentInstances&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; );&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;sibling&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;sibling&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;sibling&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; }&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;&quot;&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="1200" width="470" x="5010" y="-550" as="geometry" />
        </mxCell>
        <mxCell id="tSYvDpO3np7NIJwQXaLi-22" edge="1" parent="1" source="bbmsZlRke5MW_gYbGA1g-24" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.004;entryY=0.55;entryDx=0;entryDy=0;entryPerimeter=0;fontSize=12;startSize=8;endSize=8;" target="tSYvDpO3np7NIJwQXaLi-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-1" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="&lt;font style=&quot;font-size: 15px;&quot;&gt;&lt;b style=&quot;&quot;&gt;Root&lt;/b&gt;&lt;/font&gt;" vertex="1">
          <mxGeometry height="80" width="80" x="3480" y="-1990" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-2" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="&lt;font style=&quot;font-size: 15px;&quot;&gt;&lt;b style=&quot;&quot;&gt;Node&lt;/b&gt;&lt;/font&gt;" vertex="1">
          <mxGeometry height="80" width="80" x="3480" y="-1790" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-5" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="&lt;font style=&quot;font-size: 15px;&quot;&gt;&lt;b style=&quot;&quot;&gt;Node&lt;/b&gt;&lt;/font&gt;" vertex="1">
          <mxGeometry height="80" width="80" x="3640" y="-1790" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-7" edge="1" parent="1" source="3bpg2qD2rNDyjXUS0p8z-1" style="endArrow=classic;html=1;rounded=0;fontSize=12;startSize=8;endSize=8;curved=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" target="3bpg2qD2rNDyjXUS0p8z-2" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3510" y="-1909.9999999999995" as="sourcePoint" />
            <mxPoint x="3510" y="-1790.0000000000005" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-8" connectable="0" parent="3bpg2qD2rNDyjXUS0p8z-7" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;" value="Child" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-13" edge="1" parent="1" source="3bpg2qD2rNDyjXUS0p8z-2" style="endArrow=classic;html=1;rounded=0;fontSize=12;startSize=8;endSize=8;curved=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="3bpg2qD2rNDyjXUS0p8z-5" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3560" y="-1900" as="sourcePoint" />
            <mxPoint x="3550" y="-1800" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-14" connectable="0" parent="3bpg2qD2rNDyjXUS0p8z-13" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;" value="Sibling" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-17" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="&lt;font style=&quot;font-size: 15px;&quot;&gt;&lt;b style=&quot;&quot;&gt;Node&lt;/b&gt;&lt;/font&gt;" vertex="1">
          <mxGeometry height="80" width="80" x="3800" y="-1790" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-18" edge="1" parent="1" source="3bpg2qD2rNDyjXUS0p8z-5" style="endArrow=classic;html=1;rounded=0;fontSize=12;startSize=8;endSize=8;curved=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="3bpg2qD2rNDyjXUS0p8z-17" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3950" y="-1680" as="sourcePoint" />
            <mxPoint x="3940" y="-1720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-19" connectable="0" parent="3bpg2qD2rNDyjXUS0p8z-18" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;" value="Sibling" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-20" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="&lt;font style=&quot;font-size: 15px;&quot;&gt;&lt;b style=&quot;&quot;&gt;Node&lt;/b&gt;&lt;/font&gt;" vertex="1">
          <mxGeometry height="80" width="80" x="3480" y="-1590" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-21" edge="1" parent="1" source="3bpg2qD2rNDyjXUS0p8z-2" style="endArrow=classic;html=1;rounded=0;fontSize=12;startSize=8;endSize=8;curved=1;exitX=0.261;exitY=0.953;exitDx=0;exitDy=0;entryX=0.227;entryY=0.093;entryDx=0;entryDy=0;entryPerimeter=0;exitPerimeter=0;" target="3bpg2qD2rNDyjXUS0p8z-20" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3330" y="-1640" as="sourcePoint" />
            <mxPoint x="3530" y="-1640" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-22" connectable="0" parent="3bpg2qD2rNDyjXUS0p8z-21" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;" value="Child" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-23" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="&lt;font style=&quot;font-size: 15px;&quot;&gt;&lt;b style=&quot;&quot;&gt;Node&lt;/b&gt;&lt;/font&gt;" vertex="1">
          <mxGeometry height="80" width="80" x="3800" y="-1590" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-24" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="&lt;font style=&quot;font-size: 15px;&quot;&gt;&lt;b style=&quot;&quot;&gt;Node&lt;/b&gt;&lt;/font&gt;" vertex="1">
          <mxGeometry height="80" width="80" x="3960" y="-1590" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-25" edge="1" parent="1" source="3bpg2qD2rNDyjXUS0p8z-17" style="endArrow=classic;html=1;rounded=0;fontSize=12;startSize=8;endSize=8;curved=1;exitX=0.367;exitY=0.993;exitDx=0;exitDy=0;entryX=0.354;entryY=0.009;entryDx=0;entryDy=0;entryPerimeter=0;exitPerimeter=0;" target="3bpg2qD2rNDyjXUS0p8z-23" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3770" y="-1760" as="sourcePoint" />
            <mxPoint x="3850" y="-1610.67" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-26" connectable="0" parent="3bpg2qD2rNDyjXUS0p8z-25" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;" value="Child" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-27" edge="1" parent="1" source="3bpg2qD2rNDyjXUS0p8z-23" style="endArrow=classic;html=1;rounded=0;fontSize=12;startSize=8;endSize=8;curved=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="3bpg2qD2rNDyjXUS0p8z-24" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3880" y="-1700" as="sourcePoint" />
            <mxPoint x="3870" y="-1600" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-28" connectable="0" parent="3bpg2qD2rNDyjXUS0p8z-27" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;" value="Sibling" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-29" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="&lt;font style=&quot;font-size: 15px;&quot;&gt;&lt;b style=&quot;&quot;&gt;Node&lt;/b&gt;&lt;/font&gt;" vertex="1">
          <mxGeometry height="80" width="80" x="4120" y="-1590" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-30" edge="1" parent="1" source="3bpg2qD2rNDyjXUS0p8z-24" style="endArrow=classic;html=1;rounded=0;fontSize=12;startSize=8;endSize=8;curved=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="3bpg2qD2rNDyjXUS0p8z-29" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="4270" y="-1480" as="sourcePoint" />
            <mxPoint x="4260" y="-1520" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-31" connectable="0" parent="3bpg2qD2rNDyjXUS0p8z-30" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;" value="Sibling" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-32" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;b&gt;&lt;font style=&quot;font-size: 32px;&quot;&gt;React Main Tree Structrure&lt;/font&gt;&lt;/b&gt;" vertex="1">
          <mxGeometry height="30" width="360" x="3720" y="-1950" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-35" edge="1" parent="1" source="3bpg2qD2rNDyjXUS0p8z-2" style="endArrow=classic;html=1;rounded=0;fontSize=12;startSize=8;endSize=8;curved=1;exitX=0.617;exitY=0.008;exitDx=0;exitDy=0;entryX=0.614;entryY=0.981;entryDx=0;entryDy=0;entryPerimeter=0;exitPerimeter=0;" target="3bpg2qD2rNDyjXUS0p8z-1" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3600" y="-1930" as="sourcePoint" />
            <mxPoint x="3600" y="-1810" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-36" connectable="0" parent="3bpg2qD2rNDyjXUS0p8z-35" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;" value="Return" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-37" edge="1" parent="1" source="3bpg2qD2rNDyjXUS0p8z-20" style="endArrow=classic;html=1;rounded=0;fontSize=12;startSize=8;endSize=8;curved=1;exitX=0.687;exitY=0.033;exitDx=0;exitDy=0;entryX=0.681;entryY=0.98;entryDx=0;entryDy=0;entryPerimeter=0;exitPerimeter=0;" target="3bpg2qD2rNDyjXUS0p8z-2" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3553" y="-1670" as="sourcePoint" />
            <mxPoint x="3550" y="-1539" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-38" connectable="0" parent="3bpg2qD2rNDyjXUS0p8z-37" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;" value="Return" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-39" edge="1" parent="1" source="3bpg2qD2rNDyjXUS0p8z-5" style="endArrow=classic;html=1;rounded=0;fontSize=12;startSize=8;endSize=8;curved=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.621;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;" target="3bpg2qD2rNDyjXUS0p8z-1" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3530" y="-1767" as="sourcePoint" />
            <mxPoint x="3530" y="-1890" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-40" connectable="0" parent="3bpg2qD2rNDyjXUS0p8z-39" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;" value="Return" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-41" edge="1" parent="1" source="3bpg2qD2rNDyjXUS0p8z-17" style="endArrow=classic;html=1;rounded=0;fontSize=12;startSize=8;endSize=8;curved=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.621;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;" target="3bpg2qD2rNDyjXUS0p8z-1" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3710" y="-1791" as="sourcePoint" />
            <mxPoint x="3560" y="-1911" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-42" connectable="0" parent="3bpg2qD2rNDyjXUS0p8z-41" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;" value="Return" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-43" edge="1" parent="1" source="3bpg2qD2rNDyjXUS0p8z-29" style="endArrow=classic;html=1;rounded=0;fontSize=12;startSize=8;endSize=8;curved=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.767;entryY=0.911;entryDx=0;entryDy=0;entryPerimeter=0;" target="3bpg2qD2rNDyjXUS0p8z-17" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="4170" y="-1600" as="sourcePoint" />
            <mxPoint x="3860" y="-1720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-44" connectable="0" parent="3bpg2qD2rNDyjXUS0p8z-43" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;" value="Return" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-45" edge="1" parent="1" source="3bpg2qD2rNDyjXUS0p8z-24" style="endArrow=classic;html=1;rounded=0;fontSize=12;startSize=8;endSize=8;curved=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.74;entryY=0.92;entryDx=0;entryDy=0;entryPerimeter=0;" target="3bpg2qD2rNDyjXUS0p8z-17" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="4312" y="-1468" as="sourcePoint" />
            <mxPoint x="3860" y="-1710" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-46" connectable="0" parent="3bpg2qD2rNDyjXUS0p8z-45" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;" value="Return" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-47" edge="1" parent="1" source="3bpg2qD2rNDyjXUS0p8z-23" style="endArrow=classic;html=1;rounded=0;fontSize=12;startSize=8;endSize=8;curved=1;exitX=0.76;exitY=0.079;exitDx=0;exitDy=0;entryX=0.767;entryY=0.902;entryDx=0;entryDy=0;exitPerimeter=0;entryPerimeter=0;" target="3bpg2qD2rNDyjXUS0p8z-17" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="4032" y="-1558" as="sourcePoint" />
            <mxPoint x="3900" y="-1690" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3bpg2qD2rNDyjXUS0p8z-48" connectable="0" parent="3bpg2qD2rNDyjXUS0p8z-47" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;" value="Return" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wM2G14S6M0pHxMQ7cfMy-1" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;" value="" vertex="1">
          <mxGeometry height="1210" width="2000" x="-1220" y="1610" as="geometry" />
        </mxCell>
        <mxCell id="wM2G14S6M0pHxMQ7cfMy-2" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;h1&gt;&lt;span style=&quot;font-size: 48px;&quot;&gt;Effect work flow&lt;/span&gt;&lt;/h1&gt;" vertex="1">
          <mxGeometry height="30" width="389" x="70" y="1660" as="geometry" />
        </mxCell>
        <mxCell id="wM2G14S6M0pHxMQ7cfMy-4" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Mount hook with some properties&lt;/h1&gt;&lt;div style=&quot;color: rgb(59, 59, 59); background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-family: &amp;quot;Fira Code&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 20px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;function&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;mountEffectImpl&lt;/span&gt;(&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;fiberFlags&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Flags&lt;/span&gt;, &amp;nbsp;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// PassiveEffect | PassiveStaticEffect,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;hookFlags&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;HookFlags&lt;/span&gt; , &amp;nbsp;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// HookPassive,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;create&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; () &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;=&amp;gt;&lt;/span&gt; (() &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;void&lt;/span&gt;) &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;void&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;deps&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Array&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;mixed&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;void&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;null&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;)&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;void&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;hook&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;mountWorkInProgressHook&lt;/span&gt;();&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;nextDeps&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;deps&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;===&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;undefined&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;?&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;deps&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;currentlyRenderingFiber&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;flags&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;fiberFlags&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;hook&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;memoizedState&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;pushSimpleEffect&lt;/span&gt;(&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;HookHasEffect&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;hookFlags&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;createEffectInstance&lt;/span&gt;(), &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// { destroy: undefined }&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;create&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// callback is pushed into useEffect&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;nextDeps&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; );&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// effect is attached into hook.memoizeState here&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;function&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;pushSimpleEffect&lt;/span&gt;(&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;tag&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;HookFlags&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;inst&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;EffectInstance&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;create&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; () &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;=&amp;gt;&lt;/span&gt; (() &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;void&lt;/span&gt;) &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;void&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;deps&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Array&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;mixed&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;void&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;null&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;)&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Effect&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;effect&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Effect&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;tag&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;create&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// the callback push into useEffect&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;deps&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;inst&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; {&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;destroy&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;undefined&lt;/span&gt;},&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// Circular&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;:&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;null&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;any&lt;/span&gt;),&lt;/div&gt;&lt;div&gt;&amp;nbsp; };&lt;/div&gt;&lt;div&gt;&amp;nbsp; return &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;pushEffectImpl&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;effect&lt;/span&gt;); &lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// here lastEffect is &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// bound to fiber so it will be executed later&lt;/span&gt;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="767" width="470" x="-1130" y="1683" as="geometry" />
        </mxCell>
        <mxCell id="wM2G14S6M0pHxMQ7cfMy-5" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;fillColor=default;strokeColor=default;perimeterSpacing=0;absoluteArcSize=0;arcSize=12;noLabel=0;labelPadding=1;spacingLeft=12;spacingBottom=12;spacing=2;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Notes&lt;/h1&gt;&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;Here we can see bit manipulation is used to mark some flags or&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;priorities to perform operations in the next phases of component&#39;s life cycle&lt;/span&gt;&lt;/p&gt;" vertex="1">
          <mxGeometry height="210" width="390" x="-1130" y="2500" as="geometry" />
        </mxCell>
        <mxCell id="-BO8mZpq9QuOK5qV9xMZ-4" edge="1" parent="1" source="-BO8mZpq9QuOK5qV9xMZ-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1.002;exitY=0.442;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitPerimeter=0;" target="-BO8mZpq9QuOK5qV9xMZ-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-BO8mZpq9QuOK5qV9xMZ-5" edge="1" parent="1" source="-BO8mZpq9QuOK5qV9xMZ-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.993;exitY=0.779;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitPerimeter=0;" target="-BO8mZpq9QuOK5qV9xMZ-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-BO8mZpq9QuOK5qV9xMZ-1" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Invoke callback after mount or update&lt;/h1&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-family: &amp;quot;Fira Code&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 20px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); font-size: 14px;&quot;&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// After commiting root react will flush all the effects&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// and this is the place where clean up and callback &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// functions &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;are executed&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;commitRoot&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 20px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;flushMutationEffects&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0); font-size: 14px;&quot;&gt;// Check the mask to know all the pending effects&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 20px;&quot;&gt;&lt;font color=&quot;#008000&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;&lt;b&gt;// HOW WAS &quot;subtreeFlags&quot; aggregated?? &lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;font color=&quot;#008000&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;// Answer: was handled during reconciliation and in &lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;font color=&quot;#008000&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;// sub-function: &lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;color: rgb(121, 94, 38); font-size: 14.1797px; background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;bubbleProperties&lt;/span&gt;&lt;span style=&quot;font-size: 14px; color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt; &lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;div style=&quot;font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;subtreeMutationHasEffects&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; (&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;finishedWork&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;subtreeFlags&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;MutationMask&lt;/span&gt;) &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!==&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NoFlags&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;subtreeMutationHasEffects&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;||&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;rootMutationHasEffect&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;commitMutationEffects&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;root&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;finishedWork&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;lanes&lt;/span&gt;);&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); font-size: 14px; line-height: 20px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px; line-height: 20px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59); font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;commitMutationEffects&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14.1797px; line-height: 20px; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;commitMutationEffectsOnFiber&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;finishedWork&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;root&lt;/span&gt;, &lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;committedLanes&lt;/span&gt;);&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;div style=&quot;font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;flags&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;Update&lt;/span&gt;) {&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;commitHookEffectListUnmount&lt;/span&gt;(&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;HookInsertion&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;HookHasEffect&lt;/span&gt;,&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;finishedWork&lt;/span&gt;,&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;finishedWork&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;return&lt;/span&gt;,&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; );&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// TODO: Use a commitHookInsertionUnmountEffects wrapper &lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;  // to record timings.&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;commitHookEffectListMount&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;HookInsertion&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;HookHasEffect&lt;/span&gt;,&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#3b3b3b&quot;&gt;  &lt;/font&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;finishedWork&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;);&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;commitHookLayoutUnmountEffects&lt;/span&gt;(&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;finishedWork&lt;/span&gt;,&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;finishedWork&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;return&lt;/span&gt;,&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;HookLayout&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;HookHasEffect&lt;/span&gt;,&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; );&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;}&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="900" width="500" x="-520" y="1800" as="geometry" />
        </mxCell>
        <mxCell id="-BO8mZpq9QuOK5qV9xMZ-2" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&lt;span style=&quot;background-color: rgb(236, 236, 236);&quot;&gt;Clean up&lt;/span&gt;&lt;/h1&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(236, 236, 236);&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38); font-family: &amp;quot;Fira Code&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14.1797px; white-space: pre; background-color: rgb(255, 255, 255);&quot;&gt;commitHookEffectListUnmount&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(236, 236, 236);&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38); font-family: &amp;quot;Fira Code&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14.1797px; white-space: pre; background-color: rgb(255, 255, 255);&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(236, 236, 236);&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38); font-family: &amp;quot;Fira Code&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14.1797px; white-space: pre; background-color: rgb(255, 255, 255);&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59); font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// Unmount&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;inst&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;effect&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;inst&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;destroy&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;inst&lt;/span&gt;.&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;destroy&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;destroy();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="210" width="527" x="70" y="2500" as="geometry" />
        </mxCell>
        <mxCell id="-BO8mZpq9QuOK5qV9xMZ-3" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&lt;span style=&quot;background-color: rgb(236, 236, 236);&quot;&gt;Invoke callback&lt;/span&gt;&lt;/h1&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(236, 236, 236);&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38); font-family: &amp;quot;Fira Code&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14.1797px; white-space: pre; background-color: rgb(255, 255, 255);&quot;&gt;commitHookEffectListMount&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(236, 236, 236);&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38); font-family: &amp;quot;Fira Code&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14.1797px; white-space: pre; background-color: rgb(255, 255, 255);&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(236, 236, 236);&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38); font-family: &amp;quot;Fira Code&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14.1797px; white-space: pre; background-color: rgb(255, 255, 255);&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59); font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;updateQueue&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;FunctionComponentUpdateQueue&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;null&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;finishedWork&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;updateQueue&lt;/span&gt;: &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;any&lt;/span&gt;);&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;lastEffect&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;updateQueue&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!==&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;?&lt;/span&gt; &lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;  updateQueue&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lastEffect&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;lastEffect&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!==&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;firstEffect&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;lastEffect&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;let&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;effect&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;firstEffect&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;do&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; ((&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;effect&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;tag&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;flags&lt;/span&gt;) &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;===&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;flags&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;enableSchedulingProfiler&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; ((&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;flags&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;HookPassive&lt;/span&gt;) &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!==&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NoHookEffect&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;markComponentPassiveEffectMountStarted&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;finishedWork&lt;/span&gt;);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; } &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;else&lt;/span&gt; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; ((&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;flags&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;HookLayout&lt;/span&gt;) &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!==&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NoHookEffect&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;markComponentLayoutEffectMountStarted&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;finishedWork&lt;/span&gt;);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// Mount&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;let&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;destroy&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;create&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;effect&lt;/span&gt;.&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;create&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;inst&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;effect&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;inst&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 16, 128);&quot;&gt;destroy&lt;/span&gt;&lt;span style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18)); color: rgb(121, 94, 38);&quot;&gt;create&lt;/span&gt;&lt;span style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;(); &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// invoked here&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;inst&lt;/span&gt;.&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;destroy&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;destroy&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;effect&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;effect&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; } &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;while&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;effect&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!==&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;firstEffect&lt;/span&gt;);&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(236, 236, 236);&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38); font-family: &amp;quot;Fira Code&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14.1797px; white-space: pre; background-color: rgb(255, 255, 255);&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="650" width="530" x="70" y="1800" as="geometry" />
        </mxCell>
        <mxCell id="-BO8mZpq9QuOK5qV9xMZ-6" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;" value="" vertex="1">
          <mxGeometry height="1600" width="4140" x="1270" y="1580" as="geometry" />
        </mxCell>
        <mxCell id="-BO8mZpq9QuOK5qV9xMZ-7" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;h1&gt;&lt;span style=&quot;font-size: 48px;&quot;&gt;Context work flow&lt;/span&gt;&lt;/h1&gt;" vertex="1">
          <mxGeometry height="30" width="590" x="2560" y="1630" as="geometry" />
        </mxCell>
        <mxCell id="Zd_g-HLBxH-xni_pbEgb-3" edge="1" parent="1" source="-BO8mZpq9QuOK5qV9xMZ-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="Zd_g-HLBxH-xni_pbEgb-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-BO8mZpq9QuOK5qV9xMZ-8" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Init a context&lt;/h1&gt;&lt;div style=&quot;color: rgb(59, 59, 59); background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-family: &amp;quot;Fira Code&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 20px;&quot;&gt;&lt;div style=&quot;font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #0000ff;&quot;&gt;function&lt;/span&gt; &lt;span style=&quot;color: #795e26;&quot;&gt;createContext&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #267f99;&quot;&gt;T&lt;/span&gt;&amp;gt;(&lt;span style=&quot;color: #001080;&quot;&gt;defaultValue&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #267f99;&quot;&gt;T&lt;/span&gt;)&lt;span style=&quot;color: #000000;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #267f99;&quot;&gt;ReactContext&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #267f99;&quot;&gt;T&lt;/span&gt;&amp;gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: #008000;&quot;&gt;// TODO: Second argument used to be an optional `calculateChangedBits`&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: #008000;&quot;&gt;// function. Warn to reserve for future use?&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: #0000ff;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #0070c1;&quot;&gt;context&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #267f99;&quot;&gt;ReactContext&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #267f99;&quot;&gt;T&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: #000000;&quot;&gt;=&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;$$typeof&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #0070c1;&quot;&gt;REACT_CONTEXT_TYPE&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #008000;&quot;&gt;// As a workaround to support multiple concurrent renderers, we categorize&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #008000;&quot;&gt;// some renderers as primary and others as secondary. We only expect&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #008000;&quot;&gt;// there to be two concurrent renderers at most: React Native (primary) and&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #008000;&quot;&gt;// Fabric (secondary); React DOM (primary) and React ART (secondary).&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #008000;&quot;&gt;// Secondary renderers store their context values on separate fields.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;_currentValue&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #001080;&quot;&gt;defaultValue&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;_currentValue2&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #001080;&quot;&gt;defaultValue&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #008000;&quot;&gt;// Used to track how many concurrent renderers this context currently&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #008000;&quot;&gt;// supports within in a single renderer. Such as parallel server rendering.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;_threadCount&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #098658;&quot;&gt;0&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #008000;&quot;&gt;// These are circular&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;Provider&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; (&lt;span style=&quot;color: #001080;&quot;&gt;null&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #001080;&quot;&gt;any&lt;/span&gt;),&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;Consumer&lt;/span&gt;: (&lt;span style=&quot;color: #001080;&quot;&gt;null&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #001080;&quot;&gt;any&lt;/span&gt;),&lt;/div&gt;&lt;div&gt;&amp;nbsp; };&lt;/div&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: #0070c1;&quot;&gt;context&lt;/span&gt;.&lt;span style=&quot;color: #001080;&quot;&gt;Provider&lt;/span&gt; = &lt;span style=&quot;color: #0070c1;&quot;&gt;context&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: #0070c1;&quot;&gt;context&lt;/span&gt;.&lt;span style=&quot;color: #001080;&quot;&gt;Consumer&lt;/span&gt; = {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;$$typeof&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #0070c1;&quot;&gt;REACT_CONSUMER_TYPE&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;_context&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #0070c1;&quot;&gt;context&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; };&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: #795e26;&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: #0070c1;&quot;&gt;__DEV__&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #0070c1;&quot;&gt;context&lt;/span&gt;.&lt;span style=&quot;color: #001080;&quot;&gt;_currentRenderer&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #0070c1;&quot;&gt;context&lt;/span&gt;.&lt;span style=&quot;color: #001080;&quot;&gt;_currentRenderer2&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; }&lt;/div&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color: #0070c1;&quot;&gt;context&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="747" width="670" x="1350" y="1754" as="geometry" />
        </mxCell>
        <mxCell id="-BO8mZpq9QuOK5qV9xMZ-10" edge="1" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1.002;exitY=0.442;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitPerimeter=0;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2471" y="2167.8" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-BO8mZpq9QuOK5qV9xMZ-11" edge="1" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.993;exitY=0.779;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitPerimeter=0;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2466.5" y="2471.1000000000004" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-BO8mZpq9QuOK5qV9xMZ-15" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;What happen on context changes&lt;/h1&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-family: &amp;quot;Fira Code&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 20px;&quot;&gt;&lt;div style=&quot;font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;font-size: 14.1797px; line-height: 20px; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;&lt;div style=&quot;font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59); font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;span style=&quot;color: #795e26;&quot;&gt;beginWork&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// At beginning of work, react checks the changes on props, state update(based on&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#008000&quot;&gt;// lanes) or context changes&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(59, 59, 59);&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;function&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;checkScheduledUpdateOrContext&lt;/span&gt;(&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Fiber&lt;/span&gt;,&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;renderLanes&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Lanes&lt;/span&gt;,&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;)&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;boolean&lt;/span&gt; {&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// Before performing an early bailout, we must check if there are pending&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// updates or context.&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;updateLanes&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lanes&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;includesSomeLane&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;updateLanes&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;renderLanes&lt;/span&gt;)) {&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;true&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; }&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// No pending update, but because context is propagated lazily, we need&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// to check for a context change before we bail out.&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;dependencies&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;dependencies&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;dependencies&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!==&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;checkIfContextChanged&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;dependencies&lt;/span&gt;)) {&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;true&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; }&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;false&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;}&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59); font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;function&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;checkIfContextChanged&lt;/span&gt;(&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;currentDependencies&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;Dependencies&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;)&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;boolean&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// Iterate over the current dependencies to see if something changed. This&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// only gets called if props and state has already bailed out, so it&#39;s a&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// relatively uncommon path, except at the root of a changed subtree.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// Alternatively, we could move these comparisons into `readContext`, but&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// that&#39;s a much hotter path, so I think this is an appropriate trade off.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;let&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;dependency&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;currentDependencies&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;firstContext&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;while&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;dependency&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!==&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;null&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;context&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;dependency&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;context&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newValue&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;isPrimaryRenderer&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;?&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;context&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;_currentValue&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;context&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;_currentValue2&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;oldValue&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;dependency&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;memoizedValue&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;!&lt;/span&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;is&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newValue&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;oldValue&lt;/span&gt;)) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;true&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;dependency&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;dependency&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;false&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="970" width="670" x="3930" y="1690" as="geometry" />
        </mxCell>
        <mxCell id="-BO8mZpq9QuOK5qV9xMZ-16" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;fillColor=default;strokeColor=default;perimeterSpacing=0;absoluteArcSize=0;arcSize=12;noLabel=0;labelPadding=1;spacingLeft=12;spacingBottom=12;spacing=2;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Notes&lt;/h1&gt;&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;+ Contexts can be nested and are attached to fiber through field&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;&quot;&lt;b&gt;dependencies&lt;/b&gt;&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;+ Values are stored and consumed from &quot;&lt;b&gt;memoizedValue&quot;&amp;nbsp;&lt;/b&gt;and update&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;by comparison with private &lt;b&gt;_currentValue or _currentValue2&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;" vertex="1">
          <mxGeometry height="280" width="670" x="3930" y="2820" as="geometry" />
        </mxCell>
        <mxCell id="Zd_g-HLBxH-xni_pbEgb-5" edge="1" parent="1" source="Zd_g-HLBxH-xni_pbEgb-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" target="Zd_g-HLBxH-xni_pbEgb-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Zd_g-HLBxH-xni_pbEgb-1" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Provider and Consumer&lt;/h1&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-family: &amp;quot;Fira Code&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 20px;&quot;&gt;&lt;div style=&quot;font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;font-size: 14.1797px; line-height: 20px; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;&lt;div style=&quot;font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&lt;div style=&quot;font-size: 14.1797px; line-height: 20px; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); font-size: 14px; line-height: 20px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;updateContextProvider&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px; line-height: 20px;&quot;&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// where &amp;lt;Provider value={aPropValue} /&amp;gt; pass &lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// context content to its children&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;context&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;ReactContext&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;type&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newProps&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingProps&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newValue&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newProps&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;value&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// simply push context._currentValue to a cursor stack { current: any }[]&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;pushProvider&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;context&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newValue&lt;/span&gt;);&lt;/div&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newChildren&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newProps&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;children&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;reconcileChildren&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newChildren&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;renderLanes&lt;/span&gt;);&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;child&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;updateContextConsumer&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); line-height: 20px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;/* where children consume context by the following pattern:&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt; &lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&amp;lt;ContextConsumer&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&amp;nbsp; {&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&amp;nbsp; &amp;nbsp; (value) =&amp;gt; &amp;lt;ChildComponent contextValue={value} /&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&amp;nbsp; }&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&amp;lt;/ContextConsumer&amp;gt; &lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;*/&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;{&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;consumerType&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;ReactConsumerType&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;type&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;context&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;ReactContext&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;consumerType&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;_context&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newProps&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;pendingProps&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;render&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newProps&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;children&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;  &lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// bind workInProgress to currentlyRenderringFiber and reset fiber.dependencies&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#008000&quot;&gt;  // field&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;prepareToReadContext&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;renderLanes&lt;/span&gt;);&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newValue&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;readContext&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;context&lt;/span&gt;);&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newChildren&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;render&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newValue&lt;/span&gt;); &lt;span style=&quot;color: rgb(0, 128, 0); background-color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));&quot;&gt;// where the above pattern is applied&lt;/span&gt;&lt;/div&gt;&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// React DevTools reads this flag.&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;flags&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;PerformedWork&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;reconcileChildren&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;current&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;newChildren&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;renderLanes&lt;/span&gt;);&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(175, 0, 219);&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;workInProgress&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;child&lt;/span&gt;;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186));&quot;&gt;}&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); font-size: 14px; line-height: 20px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="970" width="670" x="2170" y="2100" as="geometry" />
        </mxCell>
        <mxCell id="Zd_g-HLBxH-xni_pbEgb-4" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=default;fillColor=default;gradientColor=none;fixDash=0;labelPadding=0;spacing=12;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Read context&lt;/h1&gt;&lt;div style=&quot;background-color: rgb(255, 255, 255); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 19px; white-space: pre; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div style=&quot;font-family: &amp;quot;Fira Code&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 20px;&quot;&gt;&lt;div style=&quot;font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;font-size: 14.1797px; line-height: 20px; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;&lt;div style=&quot;font-size: 14.1797px; line-height: 20px;&quot;&gt;&lt;div style=&quot;color: rgb(59, 59, 59);&quot;&gt;&lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;&lt;div style=&quot;font-size: 14.1797px; line-height: 20px; color: rgb(59, 59, 59);&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(59, 59, 59), rgb(186, 186, 186)); font-size: 14px; line-height: 20px;&quot;&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;readContext&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;readContextForConsumer&lt;/span&gt;(&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;currentlyRenderingFiber&lt;/span&gt;, &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;context&lt;/span&gt;)&lt;/div&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// this function is used for Consumer and useContext in react&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;value&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;isPrimaryRenderer&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;?&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;context&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;_currentValue&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;context&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;_currentValue2&lt;/span&gt;;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 0, 255);&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;contextItem&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(121, 94, 38);&quot;&gt;context&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;:&lt;/span&gt; ((&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;context&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;any&lt;/span&gt;)&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;ReactContext&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;mixed&lt;/span&gt;&amp;gt;),&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;memoizedValue&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;value&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;null&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; };&lt;/div&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(38, 127, 153);&quot;&gt;if&lt;/span&gt; (&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lastContextDependency&lt;/span&gt; === &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;null&lt;/span&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// This is the first dependency for this component. Create a new list.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lastContextDependency&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;contextItem&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 20px;&quot;&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;consumer&lt;/span&gt;.&lt;span style=&quot;color: #001080;&quot;&gt;dependencies&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;=&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;lanes&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #0070c1;&quot;&gt;NoLanes&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: #001080;&quot;&gt;firstContext&lt;/span&gt;&lt;span style=&quot;color: #001080;&quot;&gt;:&lt;/span&gt; &lt;span style=&quot;color: #0070c1;&quot;&gt;contextItem&lt;/span&gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; };&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;consumer&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;flags&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;|=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;NeedsPropagation&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; } &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;else&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 128, 0);&quot;&gt;// Append a new context item.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lastContextDependency&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;lastContextDependency&lt;/span&gt;.&lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;next&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;contextItem&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;&amp;nbsp; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: rgb(0, 16, 128);&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color: rgb(0, 112, 193);&quot;&gt;value&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="650" width="670" x="3005" y="2180" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
